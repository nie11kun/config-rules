[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 27.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com, e.crashlytics.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,27.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32
dns-server = system,119.29.29.29,223.5.5.5,1.1.1.1,8.8.8.8,https://cloudflare-dns.com/dns-query
ipv6 = false

[Rule]

# PROXY added
DOMAIN-SUFFIX,ap-oversea-tls.agora.io,PROXY
DOMAIN-SUFFIX,testflight.apple.com,PROXY
DOMAIN-SUFFIX,recaptcha.net,PROXY

# direct added
DOMAIN-SUFFIX,email.advertising.newtimeai.com,DIRECT
DOMAIN-SUFFIX,wxs.qq.com,DIRECT
DOMAIN-SUFFIX,amdc.m.taobao.com,DIRECT
DOMAIN-SUFFIX,rerevod.info,DIRECT
DOMAIN-SUFFIX,rerevod.net,DIRECT
DOMAIN-SUFFIX,hdchina.org,DIRECT
DOMAIN-SUFFIX,alipayobjects.com,DIRECT
DOMAIN-SUFFIX,alicdn.com,DIRECT
DOMAIN-SUFFIX,speedtest.net,DIRECT
DOMAIN-SUFFIX,163.com,DIRECT
DOMAIN-SUFFIX,zdmimg.com,DIRECT
DOMAIN-SUFFIX,smzdm.com,DIRECT
DOMAIN-SUFFIX,umeng.com,DIRECT
DOMAIN-SUFFIX,10010.com,DIRECT
DOMAIN-SUFFIX,360buyimg.com,DIRECT
DOMAIN-SUFFIX,jd.com,DIRECT
DOMAIN-SUFFIX,app-measurement.com,DIRECT
DOMAIN-SUFFIX,niekun.net,DIRECT
# direct apple
DOMAIN-SUFFIX,apple.com,DIRECT
DOMAIN-SUFFIX,apple.cn,DIRECT
DOMAIN-SUFFIX,mail.me.com,DIRECT
DOMAIN-SUFFIX,mail.me.com.akadns.net,DIRECT
DOMAIN-SUFFIX,icloud.com,DIRECT
DOMAIN-SUFFIX,icloud.com.cn,DIRECT
DOMAIN-SUFFIX,itunes.com,DIRECT
DOMAIN-SUFFIX,mzstatic.com,DIRECT
DOMAIN-SUFFIX,icloud-content.com,DIRECT
# DIRECT baidu
DOMAIN-SUFFIX,wappass.baidu.com,DIRECT
DOMAIN-SUFFIX,passport.baidu.com,DIRECT
DOMAIN-SUFFIX,yun.baidu.com,DIRECT
DOMAIN-SUFFIX,pan.baidu.com,DIRECT
DOMAIN-SUFFIX,wenku.baidu.com,DIRECT
DOMAIN-SUFFIX,zhidao.baidu.com,DIRECT
DOMAIN-SUFFIX,baike.baidu.com,DIRECT

# REJECT added
DOMAIN-SUFFIX,360.com,REJECT
DOMAIN-SUFFIX,360.cn,REJECT

# reject set
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Advertising/Advertising.list,REJECT
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Advertising/Advertising_Domain.list,REJECT

# china direct set
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/ChinaMax/ChinaMax.list,DIRECT
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/ChinaMax/ChinaMax_Domain.list,DIRECT

# direct IP-CIDR
IP-CIDR,104.224.160.217/32,DIRECT
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,27.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT

# Other
GEOIP,CN,DIRECT
FINAL,PROXY

[Host]
localhost = 127.0.0.1

[URL Rewrite]
# Rewrite
google.cn google.com.hk 302

# youtube ad
#^https?:\/\/.+\.googlevideo\.com\/.+&oad _ reject-img
#^https?:\/\/.+\.googlevideo\.com\/.+ctier _ reject-img
#^https?:\/\/youtubei\.googleapis\.com\/youtubei\/.+ad_ _ reject-img
#^https?:\/\/youtubei\.googleapis\.com\/youtubei\/.+log_ _ reject-img
#^https?:\/\/.+\.youtube\.com\/get_midroll_ _ reject-img
#^https?:\/\/premiumyva\.appspot\.com\/vmclickstoadvertisersite _ reject-img
#^https?:\/\/.+\.youtube\.com\/api\/stats\/ads _ reject-img
#^https?:\/\/.+\.youtube\.com\/api\/stats\/.+adformat _ reject-img
#^https?:\/\/.+\.youtube\.com\/pagead\/ _ reject-img
#^https?:\/\/.+\.youtube\.com\/ptracking _ reject-img

[Script]
wechat_ad = type=http-response,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/File/Wechat.js,pattern=^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad,max-size=131072,requires-body=true,timeout=10,script-update-interval=86400,enable=true

jd_historical_price = type=http-response,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/jd_price.js,pattern=^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig),max-size=1048576,requires-body=true,timeout=60,script-update-interval=90000,enable=true
get_jdcookie = type=http-request,script-path=https://raw.githubusercontent.com/nie11kun/config-rules/master/Shadowrocket/get_jdcookie.js,pattern=^https?://api\.m\.jd\.com/client\.action\?functionId=GetJDUserInfoUnion,max-size=131072,timeout=10,enable=true

taobao_historical_price = type=http-response,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/tb_price.js,pattern=^http://.+/amdc/mobileDispatch,max-size=1048576,requires-body=true,timeout=60,script-update-interval=90000,enable=true
taobao_historical_price = type=http-response,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/tb_price.js,pattern=^https?://trade-acs\.m\.taobao\.com/gw/mtop\.taobao\.detail\.getdetail,max-size=1048576,requires-body=true,timeout=60,script-update-interval=90000,enable=true

[MITM]
enable = true
hostname = *.googlevideo.com,www.youtube.com,s.youtube.com,youtubei.googleapis.com,api.m.jd.com,trade-acs.m.taobao.com,mp.weixin.qq.com
